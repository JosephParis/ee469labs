module decoder (RegWrite, WriteRegister, out);

    input logic RegWrite;
	 input logic [4:0] WriteRegister;
	 output logic [30:0] out;
	 
	 logic;

	 //32 → 16
    generate
        for (i = 0; i < 16; i++) begin : L1
            mux2to1 m1 (in[2*i], in[2*i+1], sel[0], level1[i]);
        end
    endgenerate

    //16 → 8
    generate
        for (i = 0; i < 8; i++) begin : L2
            mux2to1 m2 (level1[2*i], level1[2*i+1], sel[1], level2[i]);
        end
    endgenerate

    //8 → 4
    generate
        for (i = 0; i < 4; i++) begin : L3
            mux2to1_64bit m3 (level2[2*i], level2[2*i+1], sel[2], level3[i]);
        end
    endgenerate

    //4 → 2
    generate
        for (i = 0; i < 2; i++) begin : L4
            mux2to1_64bit m4 (level3[2*i], level3[2*i+1], sel[3], level4[i]);
        end
    endgenerate

    //2 → 1
    mux2to1_64bit m5 (level4[0], level4[1], sel[4], out);
endmodule
