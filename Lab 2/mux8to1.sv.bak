module mux8to1 (in, sel, out);

    input logic [7:0] in; 
    input logic [2:0] sel;
    output logic out;
    logic level1 [3:0];
    logic level2 [1:0];

    genvar i;
    //8 → 4
    generate
        for (i = 0; i < 4; i++) begin : L1
            mux2to1 m1 (in[2*i], in[2*i+1], sel[2], level1[i]);
        end
    endgenerate

    //4 → 2
    generate
        for (i = 0; i < 2; i++) begin : L2
            mux2to1 m2 (level2[2*i], level2[2*i+1], sel[1], level2[i]);
        end
    endgenerate

    //2 → 1
    mux2to1 m3 (level4[0], level4[1], sel[0], out);
endmodule
